I"ò=<h1 id="ìŠ¤ì¹¼ë¼-ì˜ˆì™¸ì²˜ë¦¬">ìŠ¤ì¹¼ë¼ ì˜ˆì™¸ì²˜ë¦¬</h1>

<p>Scalaì—ì„œëŠ” JVM ê¸°ë°˜ ì–¸ì–´ ìµœëŒ€ì˜ ì ì¸ NPE(NullPointerException)ë¥¼ 
functionalí•˜ê²Œ handling í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ìˆ˜ë‹¨ì„ ì œê³µí•˜ê³  ìˆë‹¤.  <br />
Scalaì˜ exception handling 3ì¸ë°©ì¸ Option, Either, Try ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ì.</p>

<hr />

<h2 id="option">Option</h2>

<p>Javaì—ì„œëŠ” ë¹ˆ Listì— findë¥¼ í•  ë•Œ ê°’ì´ ì—†ìœ¼ë©´ nullì„ ë°˜í™˜í•˜ê±°ë‚˜ exception throwë¥¼ 
í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ìƒí™©ì´ë‹¤. ì´ ì¼ë°˜ì ì¸ ìƒí™©ì€ ë§¤ìš° ìœ„í—˜í•œ ìƒí™©ì´ ë  ìˆ˜ ìˆëŠ”ë° 
ì˜ëª»í•´ì„œ nullì„ reference í–ˆë‹¤ê°„ í° ì¼ì´ ë‚  ìˆ˜ ìˆê³ , exception throw ë˜í•œ í˜¸ì¶œë¶€ì—ì„œ 
ì˜ í•´ê²°í•´ì£¼ì§€ ì•Šìœ¼ë©´ í”„ë¡œê·¸ë¨ì´ ë»—ì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì´ë‹¤. exceptionì´ ë°œìƒí–ˆë‹¤ê³  í•´ì„œ 
í”„ë¡œê·¸ë¨ì´ ë»—ì–´ë²„ë¦¬ëŠ” ê²ƒì€ ì¢‹ì€ ìƒí™©ì€ ì•„ë‹ˆë‹¤.</p>

<p><img width="450" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-04-29 á„‹á…©á„’á…® 4 10 55" src="https://user-images.githubusercontent.com/26623547/116514188-a732ff80-a905-11eb-9b46-4ea593974c84.png" /></p>

<p><code class="language-plaintext highlighter-rouge">Scalaì—ì„œëŠ” ì´ëŸ¬í•œ ì¼ì„ ì¢€ ë” ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•´ì¤„ ìˆ˜ ìˆê²Œ Option[T] ë¼ëŠ” typeì„ ì œê³µí•œë‹¤.</code> <br />
ê°’ì´ ìˆìœ¼ë©´ Some(value), ê°’ì´ ì—†ìœ¼ë©´ Noneì„ ë°˜í™˜í•œë‹¤.</p>

<blockquote>
  <p>Noneì€ Option[Nothing]ì„ ìƒì†í•˜ëŠ” objectì´ë‹¤. null ëŒ€ì‹  ì‚¬ìš©í•˜ì—¬ 
NullPointerExceptionì„ ë°©ì§€ í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<p>Optionì€ 2ê°€ì§€ì˜ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆë‹¤.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Type safety : Optionìœ¼ë¡œ ê°ì‹¼ ê°’ì„ ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ ì „ë‹¬í•´ íƒ€ì…ì˜ ì•ˆì •ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Functionally aware : Optionì€ ë²„ê·¸ë¥¼ ì ê²Œ ìƒì„±í•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ë°©ë²•ì„ ì œê³µí•œë‹¤.   
ë˜í•œ, ì—°ì†ì ìœ¼ë¡œ ê³„ì‚°ë˜ëŠ” ìƒí™©ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. ì¦‰, ì¤‘ê°„ì— ë¬¸ì œê°€ ìƒê¸°ëŠ” ê²ƒì„ ë°©ì–´í•œë‹¤.</code></p>
  </li>
</ul>

<p>Optionì€ Some ë˜ëŠ” Noneì— ëŒ€í•œ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.</p>

<ul>
  <li>isDefined - true if the object is Some</li>
  <li>nonEmpty - true if the object is Some</li>
  <li>isEmpty - true if the object is None</li>
</ul>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">ol</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Option</span><span class="o">(</span><span class="kc">null</span><span class="o">)</span>   
<span class="nf">assert</span><span class="o">(</span><span class="kc">false</span> <span class="o">==</span> <span class="nv">ol</span><span class="o">.</span><span class="py">isDefined</span><span class="o">)</span>  <span class="c1">// ol == None   </span>
</code></pre></div></div>

<h4 id="retrieving-an-options-contents">Retrieving an Optionâ€™s Contents</h4>

<p>Optionìœ¼ë¡œ ê°ì‹¼ ê°’ì„ ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.  <br />
ì•„ë˜ì™€ ê°™ì´ get ë©”ì„œë“œë¥¼ ì´ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ë§Œì•½ ê°’ì´ Noneì´ë¼ë©´ 
NoSuchElementExceptionì„ ë°œìƒ ì‹œí‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— isDefined ë©”ì„œë“œë¡œ 
Someì¸ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì´ë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">o1</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="nv">v1</span> <span class="k">=</span> <span class="nf">if</span> <span class="o">(</span><span class="nv">o1</span><span class="o">.</span><span class="py">isDefined</span><span class="o">)</span> <span class="o">{</span>
  <span class="nv">o1</span><span class="o">.</span><span class="py">get</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="mi">0</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë˜ ë‹¤ë¥¸ ë°©ë²•ì€ íŒ¨í„´ ë§¤ì¹­ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">o1</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span>
<span class="k">val</span> <span class="nv">v1</span> <span class="k">=</span> <span class="n">o1</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">n</span>
  <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span>
    <span class="mi">0</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì•„ë˜ëŠ” ë” ê°„í¸í•œ ë°©ì‹ìœ¼ë¡œ Optionì˜ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li>
    <p>getOrElse : Optionë‚´ì— ìˆëŠ” ê°’ì´ Someì´ë©´ ê°’ì„ ê°€ì ¸ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ default ê°’ì„ ë¦¬í„´í•œë‹¤.</p>
  </li>
  <li>
    <p>orElse : ì‹¤ì œë¡œ ê°’ì„ ì¶”ì¶œí•˜ì§€ëŠ” ì•Šì§€ë§Œ, Noneì¸ ê²½ìš° ê°’ì„ ì±„ìš°ë ¤í•œë‹¤. Optionì´ ë¹„ì–´ ìˆì§€ ì•Šìœ¼ë©´ 
ì´ Optionì„ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ì…ë ¥í•œ Optionì„ ë°˜í™˜í•œë‹¤.</p>
  </li>
</ul>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">v1</span> <span class="k">=</span> <span class="nv">o1</span><span class="o">.</span><span class="py">getOrElse</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// Someì´ë©´ ê°’ì„ ê°€ì ¸ì˜¤ê³  Noneì´ë©´ 0 ë¦¬í„´   </span>
</code></pre></div></div>

<h4 id="mapping-options">Mapping Options</h4>

<p>ìŠ¤ì¹¼ë¼ ê³µì‹ë¬¸ì„œì—ëŠ” ì•„ë˜ì™€ ê°™ì´ Optionì´ ì„¤ëª…ë˜ì–´ ìˆë‹¤.</p>

<blockquote>
  <p>Represents optional values. Instances of Option are either an instance of scala.Some or the object None. 
The most idiomatic way to use an scala.Option instance is to treat it as a collection or monad and use map,flatMap, filter, or foreach</p>
</blockquote>

<p>map, flatMap, filter ë˜ëŠ” foreachë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">final</span> <span class="k">def</span> <span class="nf">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">A</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>   
</code></pre></div></div>

<p>ì•„ë˜ ì†ŒìŠ¤ì™€ ê°™ì´ mapì„ í†µí•´ì„œ Optionì•ˆì— ìˆëŠ” ê°’ì´ë‚˜ íƒ€ì…ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">o1</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
<span class="nf">assert</span><span class="o">(</span><span class="nv">o1</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">toString</span><span class="o">).</span><span class="py">contains</span><span class="o">(</span><span class="s">"10"</span><span class="o">))</span>
<span class="nf">assert</span><span class="o">(</span><span class="nv">o1</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="k">_</span> <span class="o">*</span> <span class="mf">2.0</span><span class="o">).</span><span class="py">contains</span><span class="o">(</span><span class="mi">20</span><span class="o">))</span>

<span class="k">val</span> <span class="nv">o2</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">None</span>
<span class="nf">assert</span><span class="o">(</span><span class="nv">o2</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">toString</span><span class="o">).</span><span class="py">isEmpty</span><span class="o">)</span>
</code></pre></div></div>

<hr />

<h2 id="either">Either</h2>

<p>EitherëŠ” Exceptionê³¼ ê²°ê³¼ ê°’ì„ í•œë²ˆì— ë°›ì„ ìˆ˜ ìˆëŠ” íƒ€ì…ë‹ˆë‹¤.</p>

<p>ì•„ë˜ì™€ ê°™ì´ Eitherì— ê°’ì„ ë‹´ì„ ìˆ˜ ìˆë‹¤. <br />
ì¸ìë¡œ ì œëŒ€ë¡œ ëœ ê°’ì´ ë“¤ì–´ì˜¤ë©´ Right ì¦‰, Eitherì˜ ì˜¤ë¥¸ìª½ì— ë‹´ê³  
ì¸ìì— ì œëŒ€ë¡œ ëœ ê°’ì´ ì•ˆ ë“¤ì–´ì˜¤ë©´ Left ì¦‰, Eitherì˜ ì™¼ìª½ì— ê°’ì„ 
ë‹´ëŠ”ë‹¤.</p>

<p><img width="450" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-04-29 á„‹á…©á„’á…® 4 11 02" src="https://user-images.githubusercontent.com/26623547/116514202-abf7b380-a905-11eb-81c1-16ac05b9b031.png" /></p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">eitherTest</span><span class="o">(</span><span class="n">num</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="kt">Either</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">num</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Right</span><span class="o">(</span><span class="n">n</span><span class="o">)</span>
  <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="nc">Left</span><span class="o">(</span><span class="s">"Error! Number is missing!"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ê·¸ í›„, ì•„ë˜ì™€ ê°™ì´ Either[String, Int] íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">result</span> <span class="k">=</span> <span class="nf">eitherExample</span><span class="o">(</span><span class="nc">Some</span><span class="o">(</span><span class="mi">7</span><span class="o">))</span> <span class="k">match</span> <span class="o">{</span>
  <span class="k">case</span> <span class="nc">Right</span><span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">num</span>
  <span class="k">case</span> <span class="nc">Left</span><span class="o">(</span><span class="n">err</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">err</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="try">Try</h2>

<p>ìë°”ì—ì„œ try/catchë¥¼ ì´ìš©í•œ ì˜ˆì™¸ì²˜ë¦¬ëŠ” ìŠ¤ì¹¼ë¼ì—ì„œë„ ê°€ëŠ¥í•˜ë‹¤.  <br />
ì•„ë˜ì™€ ê°™ì´ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, try/catchë¥¼ í†µí•œ ì˜ˆì™¸ì²˜ë¦¬ëŠ” ì—¬ëŸ¬ ê°€ì§€ 
ë¬¸ì œê°€ ìˆë‹¤.</p>

<p>ìš°ì„  ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ì–´ë–¤ ì˜ˆì™¸ê°€ ë°œìƒí• ì§€ ëª¨ë¥¸ë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
  <span class="nf">methodThatMayThrowAnException</span><span class="o">()</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">MyException</span> <span class="o">=&gt;</span> <span class="c1">// do stuff</span>
  <span class="k">case</span> <span class="n">e</span><span class="k">:</span> <span class="kt">NonFatal</span> <span class="o">=&gt;</span> <span class="c1">// do stuff</span>
  <span class="k">case</span> <span class="k">_:</span> <span class="kt">Throwable</span> <span class="o">=&gt;</span> <span class="c1">// do stuff</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="nf">anotherPieceOfCode</span><span class="o">()</span> <span class="c1">// useful to close a database connection for instance</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img width="450" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-04-29 á„‹á…©á„’á…® 4 11 10" src="https://user-images.githubusercontent.com/26623547/116514217-b0bc6780-a905-11eb-85c8-a52a44361f76.png" /></p>

<p>ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Try</span> <span class="o">{</span>
    <span class="nf">upperString</span><span class="o">(</span><span class="n">str</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Success</span><span class="o">(</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">...</span>
    <span class="k">case</span> <span class="nc">Failure</span><span class="o">(</span><span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<p><strong>Reference</strong></p>

<p><a href="https://alvinalexander.com/scala/best-practice-option-some-none-pattern-scala-idioms/">https://alvinalexander.com/scala/best-practice-option-some-none-pattern-scala-idioms/</a><br />
<a href="https://www.scala-lang.org/api/2.13.3/scala/Option.html">https://www.scala-lang.org/api/2.13.3/scala/Option.html</a><br />
<a href="https://www.baeldung.com/scala/option-type">https://www.baeldung.com/scala/option-type</a><br />
<a href="https://jaxenter.com/cheat-sheet-complete-guide-scala-136558.html">https://jaxenter.com/cheat-sheet-complete-guide-scala-136558.html</a><br />
<a href="https://nephtyws.github.io/programming/scala-option-either-try/">https://nephtyws.github.io/programming/scala-option-either-try/</a></p>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://zcx6263.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

:ET