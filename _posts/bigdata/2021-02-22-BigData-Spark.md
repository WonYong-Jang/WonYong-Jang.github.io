---
layout: post
title: "[Spark] 아파치 스파크(spark) 시작하기 "
subtitle: "Driver, Executor, Task, Cluster Manager/ RDD, DataFrame, DataSet / Hadoop"    
comments: true
categories : BigData
date: 2021-02-22
background: '/img/posts/mac.png'
---

아파치 스파크를 한마디로 정의하자면 '빅데이터 처리를 위한 오픈소스 분산 처리 플랫폼' 또는 
'빅데이터 분산 처리 엔진' 정도료 표현할 수 있다.    

빅데이터 개념이 등장했을 당시, 빅데이터는 하둡(Hadoop)이라고 할 정도로 
하둡 에코시스템이 시장을 지배했다.    
하둡은 HDFS(Hadoop Distributed File System)라고 불리는, 분산형 파일 시스템을 
기반으로 만들어졌다. 데이터 처리 시, HDFS와 맵리듀스 라고 불리는 
대형 데이터셋 병렬 처리 방식에 의해 동작한다.   

문제는 하둡의 HDFS가 DISK I/O를 기반으로 동작한다는 것에 있었다.    
실시간성 데이터에 대한 니즈(NEEDS)가 급격하게 증가하면서, 하둡으로 
처리하기에는 속도 측면에서 부적합한 상황이 발생하였다.    

이 때 등장한 것이 아파치 스파크이다.   
최근에는 경쟁 관계를 넘어서, 
    하둡+스파크 라는 둘의 연계가 하나의 큰 흐름으로 자리 잡았다.   

<img width="770" alt="스크린샷 2021-02-22 오후 11 41 28" src="https://user-images.githubusercontent.com/26623547/108723470-a2e61100-7567-11eb-938e-bb6388ac35d7.png">   

- - - 

# Spark 란?   

현재 빅데이터 분석기술 중에서 가장 주목 받는 기술은 아파치 스파크(spark)이다.   
`스파크는 인메모리(In-Memory) 기반으로 동작하기 때문에, 반복적인 처리가 필요한 작업에서 
속도가 최소 100배 이상 빠르며, 머신`   

`스파크는 스칼라로 작성되어 자바 보다 간결한 코드로 같은 작업을 표현할 수 있다. 또한 JVM에서 동작하기 
때문에 기존에 사용하던 자바 라이브러리를 모두 사용할 수 있다.`   

`스파크는 매우 큰 집합을 대상으로 빠르게 처리 작업을 수행하는 한편, 단독으로 또는 
다른 분산 컴퓨팅 툴과 조율해 여러 컴퓨터로 데이터 처리 작업을 분산할 수 있는 
데이터 처리 프레임워크이다.`   

또한, 다양한 방식으로 배포가 가능하며 Java, Scala, Python, R 프로그래밍 언어를 위한 
네이티브 바인딩을 제공하고 SQL, 스트리밍 데이터, 머신러닝, 그래프 프로세싱을 지원한다.   


- - - 

## Spark 구조    

스파크는 마스터-슬래이브 구조로 실행 되며, 
    작업을 관장하는 드라이버(driver)와 실제 작업이 동작하는 익스큐터(executor)로 구성된다.   

드라이버는 스파크 컨텍스트 객체를 생성하여 클러스터 매니저와 통신하면서 클러스터의 자원 관리를 
지원하고, 애플리케이션 라이프 사이클을 관리한다.   

<img width="600" alt="스크린샷 2021-02-22 오후 10 36 59" src="https://user-images.githubusercontent.com/26623547/108715646-7ed20200-755e-11eb-830a-4371d800fc96.png">   

스파크 실행 프로그램으로 드라이버와 익스큐터 프로세스로 실행되는 프로그램을 말한다. 클러스터 매니저가 
스파크 애플리케이션의 리소스를 효율적으로 배분하게 된다.   

#### 드라이버(Driver)   

스파크 드라이버는 스파크 애플리케이션을 실행하는 프로세스이다. main 함수를 실행하고, 
    스파크 컨텍스트(SparkContext) 객체를 생성한다. 스파크 애플리케이션의 라이프 사이클을 관리하고, 
    사용자로 부터 입력을 받아서 애플리케이션에 전달한다. 또한, 작업 처리 결과를 사용자에게 알려준다.      

드라이버는 실행 시점에 디플로이 모드를 클라이언트 모드와 
클러스터 모드로 설정할 수 있다.   

클라이언트 모드는 클러스터 외부에서 드라이버를 실행하고, 
    클러스터 모드는 클러스터 내에서 드라이버를 실행한다.   


#### 익스큐터(Executor)    

태스크 실행을 담당하는 에이전트로 실제 작업을 진행하는 프로세스이다. 
태스크 단위로 작업을 실행하고 결과를 드라이버에 알려준다.    
익스큐터가 동작 중 오류가 발생하면 다시 재작업을 진행한다.   

#### 태스크(Task)   

익스큐터에서 실행되는 실제 작업이다. 익스큐터의 캐쉬를 공유하여 작업의 
속도를 높일 수 있다.   

- - - 

## RDD, DataFrame, DataSet   

스파크 어플리케이션을 구현 방법은 스파크 v1에서 발표한 RDD를 이용하는 방법과 
스파크 v2에서 RDD의 단점으로 개선하여 발표한 DataFrame과 DataSet을 
이용하는 방법 두가지가 있다.   


<img width="800" alt="스크린샷 2021-02-23 오후 7 19 53" src="https://user-images.githubusercontent.com/26623547/108830928-06764a00-760d-11eb-9ff8-8ce22aea1f59.png">     




- - - 



- - - 

**Reference**    

<https://wikidocs.net/book/2350>     
<https://artist-developer.tistory.com/7>    

{% highlight ruby linenos %}

{% endhighlight %}


{%- if site.disqus.shortname -%}
    {%- include disqus.html -%}
{%- endif -%}

